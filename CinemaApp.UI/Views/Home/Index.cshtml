@model IEnumerable<CinemaApp.BL.DTOs.MovieDTOs.Movie.MovieDTO>
@{
    ViewData["Title"] = "Absolute cinema";
}

<input type="text" id="titleInput" placeholder="Пошук...">
<button onclick="searchByTitle(document.getElementById('titleInput'))">Знайти</button>
<button onclick="sortMovies('ReleaseDate')">Сортувати за датою виходу</button>
<button onclick="sortMovies('Rating')">Сортувати за рейтингом</button>

@if (Model == null || !Model.Any())
{
    <center><h2>Немає наявних фільмів...</h2></center>
}
else
{
    <div class="image-container">
        <div class="image-wrapper">
            <div id="movies-container">
                @foreach (var movie in Model)
                {
                    <div class="movie-item" data-release="@movie.ReleaseDate.ToString("yyyy-MM-dd")" data-rating="@movie.Rating">
                        <div class="badge-container">
                            @if (@movie.Rating >= 8)
                            {
                                <div class="relevant-badge">Рекомендовано</div>
                            }
                            @if (@movie.ReleaseDate >= DateTime.UtcNow.AddDays(-100))
                            {
                                <div class="new-badge">Новинка</div>
                            }
                        </div>
                        <img src=@movie.PosterURL alt="Image @movie.MovieID" class="openModal" data-id="@movie.MovieID">
                        <h3 class="movie-title">@movie.Title</h3>
                    </div>
                }
            </div>
        </div>
    </div>

    @foreach (var movie in Model)
    {
        <div id="modal-@movie.MovieID" class="modal">
            <div class="modal-content">
                <span class="close" data-id="@movie.MovieID">&times;</span>
                <button class="back-btn" data-id="@movie.MovieID" style="display:none;">Назад</button>
                <h3>@movie.Title</h3>
                <iframe src=@movie.TrailerURL.Replace("watch?v=", "embed/")></iframe>
                <p>@movie.Description</p>
                <p>Дата виходу – @movie.ReleaseDate.ToString("dd.MM.yyyy")</p>
                <p>Рейтинг – @movie.Rating</p>
                <p>Вікове обмеження – @movie.AgeLimit+</p>
                <button onclick="location.href='@Url.Action("UserDetails", "Movie", new { id = movie.MovieID })'">Деталі</button>
            </div>
        </div>
    }
}